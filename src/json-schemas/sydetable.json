{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "id": "http://mycs.com/schemas/furniture/sidetable",
  "definitions": {
    "sku": {
      "type": "string",
      "description": "unique id of a component in our furniture component store",
      "pattern": "^(\\d+\\.)+[\\d]+$"
    },
    "element": {
      "type": "object",
      "additionalProperties": false,
      "required": [ "sku" ],
      "properties": {
        "sku": { "$ref": "#/definitions/sku" }
      }
    }
  },
  "type": "object",
  "required": [ "tabletops", "legs" ],
  "additionalProperties": false,
  "properties": {
    "tabletops": {
      "type": "object",
      "oneOf": [
        {
          "required": [ "top" ],
          "additionalProperties": false,
          "properties": {
            "top": { "$ref": "#/definitions/element" }
          }
        },
        {
          "required": [ "top", "bottom", "left", "right" ],
          "additionalProperties": false,
          "properties": {
            "top": { "$ref": "#/definitions/element" },
            "bottom": { "$ref": "#/definitions/element" },
            "left": { "$ref": "#/definitions/element" },
            "right": { "$ref": "#/definitions/element" }
          }
        }
      ]
    },
    "tops_dividing_walls": {
      "type": "object",
      "additionalProperties": false
    },
    "legs": {
      "type": "object",
      "oneOf": [
        {
          "required": [ "front_left", "front_right" ],
          "additionalProperties": false,
          "properties": {
            "front_left": { "$ref": "#/definitions/element" },
            "front_right": { "$ref": "#/definitions/element" }
          }
        },
        {
          "required": [ "front_left", "front_right", "back_left", "back_right" ],
          "additionalProperties": false,
          "properties": {
            "front_left": { "$ref": "#/definitions/element" },
            "front_right": { "$ref": "#/definitions/element" },
            "back_left": { "$ref": "#/definitions/element" },
            "back_right": { "$ref": "#/definitions/element" }
          }
        }
      ]
    },
    "legs_connector": {
      "type": "object",
      "additionalProperties": false,
      "required": [ "bottom", "top_left", "top_right" ],
      "properties": {
        "bottom": { "$ref": "#/definitions/element" },
        "top_left": { "$ref": "#/definitions/element" },
        "top_right": { "$ref": "#/definitions/element" }
      }
    },
    "legs_platform": {
      "type": "object",
      "additionalProperties": false
    },
    "drawers": {
      "type": "object",
      "additionalProperties": false
    },
    "drawers_backwalls": {
      "type": "object",
      "additionalProperties": false
    },
    "drawers_handles": {
      "type": "object",
      "additionalProperties": false
    }
  }
}
